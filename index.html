
<!DOCTYPE html>
<html lang="en"> 
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=chrome">
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<title> PeachRain</title>
        <!-- Bootstrap -->
<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<script typet="text/javascript" src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script> 
<link href="/css/main.css" rel="stylesheet">
<link href="/css/mainTop.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media
    queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/
    html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
  <body>
<div class="jumbotron" style="height: 260px;margin-bottom: 0;padding-bottom: 0;background-color: #38b48b">
  <div class="container" style="">
   <h1>进则进，不进则退！</h1>
   <p>默默地努力，然后再一鸣惊人...</p>
   <!-- <p><a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a></p> -->
  </div>
</div>
<nav class="navbar navbar-default" role="navigation"> 
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
        <span class="sr-only"></span> 
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">PeachRain</a>
    </div>
    <div class="collapse navbar-collapse" id="navbar-collapse"> 
        <ul class="nav navbar-nav navbar-right">
          <li><a href="/">首页</a></li>
          <li><a href="/about/">关于</a></li> 
        </ul>
    </div>
  </div>
</nav>
<div class="content"> 
  <div class="container">
      <div class="row">
        <div class="main col-xs-12 col-md-8">
          <div class="home">
    
        <article class="post">
            <a style="text-decoration: none;" href="/%E7%AE%80%E5%8E%86.html"> 
            <div class="jumbotron">
              <h2>我是PeachRain</h2>
              <!-- <p><p>姓名:PeachRain
 年龄：27
 我的gitHub<a href="http://www.jianshu.com/u/54ec55bb6b32">git-Hub</a>
 我的简书<a href="http://www.jianshu.com/u/54ec55bb6b32">jian-shu</a></p>

</p> -->
              <span class="label label-info">taosiyu</span>
              <span class="label label-success">简历</span>
              <span class="label label-default">2017年3月6日</span>
            </div>
            </a>
        </article> 
    
        <article class="post">
            <a style="text-decoration: none;" href="/%E4%BB%8EintrinsicContentSize%E5%88%B0%E8%87%AA%E5%8A%A8%E8%B0%83%E6%95%B4%E5%B8%83%E5%B1%80self-sizing.html"> 
            <div class="jumbotron">
              <h2>从intrinsicContentSize到自动调整布局self-sizing</h2>
              <!-- <p><h1 id="1-intrinsic-content-size">1. intrinsic Content Size</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>什么是intrinsicContentSize？这个属性是在哪里的？
刚开始看到这个肯定会有很多的疑问。
本人接触到这个也是因为功能的需要。（一个自动适应cell内容的collectionview）。
在刚编程的时候，第一想到的还是手动适应，计算contentSize然后设置frame适应内容，但是这样给人的感觉还是有点low啊.
果断换其他方法。直到发现了intrinsicContentSize这个便捷的属性，简直不要太兴奋。
那到底什么是intrinsicContentSize呢？
Intrinsic Contenet Size – Intrinsic Content Size：固有的大小。
在AutoLayout中，它作为UIView的属性（不是语法上的属性），意思就是说我知道自己的大小，如果你没有为我指定大小，我就按照这个大小来。
比如：大家都知道在使用AutoLayout的时候，UILabel是不用指定尺寸大小的，只需指定位置即可，就是因为，只要确定了文字内容，字体等信息，它自己就能计算出大小来。
同样的UILabel，UIImageView，UIButton等这些组件及某些包含它们的系统组件都有 Intrinsic Content Size 属性，也就说他们都有自己计算size的能力。
同样的会发现UICollectionView也有这个属性。
</code></pre>
</div>

<h1 id="利用intrinsiccontentsize自动计算size">利用intrinsicContentSize自动计算size</h1>

<blockquote>
  <p>那如何利用intrinsicContentSize呢。
既然intrinsicContentSize能够自己计算，当然我们也可以手动指定他的大小，这样会有
人说。那不还是自己计算吗？
其实不是，当我们改变UICollectionView中cell的约束和内容时，UICollectionView是会自动计算size适应的，这就是contentSize，每当改变contentSize也会随着改变，计算UICollectionView都帮我们算好了，我们就可以利用contentSize来设置内容的size.
使用在UICollectionView中的 -(CGSize)intrinsicContentSize: 方法。 
并且在需要改变这个值的时候调用：invalidateIntrinsicContentSize 方法，通知系统这个值改变了，如下</p>
  <div class="highlighter-rouge"><pre class="highlight"><code>//重写该方法返回一个size
override func intrinsicContentSize() -&gt; CGSize {
        //此处你可以返回一个自己设定的size值，当然也可以返回contentSize
        return self.contentSize
    }
</code></pre>
  </div>
  <p>但是有人比较懒不想主动调用方法，也有更好的自动调用的方法，就是利用layoutSubviews</p>
  <div class="highlighter-rouge"><pre class="highlight"><code>//自定义的UICollectionView
class DynamicCollectionView: UICollectionView {
    override func layoutSubviews() {
        super.layoutSubviews()
        //此处加判断如果相等就不更新size
        if !CGSizeEqualToSize(self.bounds.size, intrinsicContentSize()) {
            invalidateIntrinsicContentSize()
        }
    }
    override func intrinsicContentSize() -&gt; CGSize {
        //这里返回自定义的UICollectionView自己的属性contentSize
        return self.contentSize
    }
}
</code></pre>
  </div>
  <p>这样的话每当UICollectionView内部的内容发生改变，他都会自己适应内容的大小达到自适应的目的.当然前提是不能添加高度的约束，添加了高度约束intrinsicContentSize会失效啊，当然你也可以自定义UILabel等，只要有intrinsicContentSize属性的都可以设置自动适应的能力。</p>
</blockquote>

<h2 id="注意">注意：</h2>
<blockquote>
  <p>还有当我们使用自己自定义的UICollectionView的时候，每当刷新数据调用reloadData()方法的时候：
务必调用 collectionViewLayout.invalidateLayout()方法，不然可能会发生下面的错误</p>
  <div class="highlighter-rouge"><pre class="highlight"><code>UICollectionView received layout attributes for a cell with an index path that does not exist
</code></pre>
  </div>
  <p>当然，由于还没有特别深入的了解写的不是很详细，其实还有很多有趣的属性，比如：
invalidateItemsAtIndexPaths: 
invalidateSupplementaryElementsOfKind:atIndexPaths: 
invalidateDecorationElementsOfKind:atIndexPaths:
的：
invalidatedItemIndexPaths 
invalidatedSupplementaryIndexPaths 
invalidatedDecorationIndexPaths 
等等有待研究。</p>
</blockquote>
</p> -->
              <span class="label label-info">taosiyu</span>
              <span class="label label-success">IOS,swift</span>
              <span class="label label-default">2017年3月6日</span>
            </div>
            </a>
        </article> 
    
        <article class="post">
            <a style="text-decoration: none;" href="/welcome-to-tiancaiTaosiyu1.html"> 
            <div class="jumbotron">
              <h2>欢迎来到PeachRain</h2>
              <!-- <p><p>这里现在只是一个普通的小博客，还处于初级阶段，以后还会有重大的更新
 如果等不及那也要等，
 可以关注我的简书<a href="http://www.jianshu.com/u/54ec55bb6b32">jian-shu</a>
 或者加我的个人微信公众号：taothinkrain的不可思议世界
 <img src="/images/code.jpg" alt="" /></p>

</p> -->
              <span class="label label-info">taosiyu</span>
              <span class="label label-success"></span>
              <span class="label label-default">2017年2月27日</span>
            </div>
            </a>
        </article> 
    

    <nav>
        <ul class="pager">
            
            
        </ul> 
    </nav>
</div>
        </div>
        <div class="sidebar col-xs-12 col-md-4">
        <aside class="about">
<h3 class="aside-title">关于</h3> 
    <div class="aside-content">
        <p>只是一名普通的90后程序员，对知识有着强烈的渴望，有毅力的摩羯座男生。\n 只是一名IOS开发者，主要使用swift,喜欢捣鼓捣鼓React,懂一点前后端小知识。
</p> 
    </div>
</aside>
<aside class="subscribe">
    <h3 class="aside-title">订阅</h3> 
    <div class="aside-content">
    <p>订阅 <a href="/feed.xml">RSS</a></p> 
    </div>
</aside>
<aside class="categories_list"> 
    <h3 class="aside-title">分类</h3> 
    <div class="aside-content">
        <ul><li class="li-type"><a href="/category/tsy/"
      title="PeachRain的随想">PeachRain的随想</a> (2)</li><li class="li-type"><a href="/category/ios/"
      title="ios,swift">ios,swift</a> (1)</li></ul>
    </div>
</aside>
        </div>
      </div>
    </div>
  </div>
<footer class="footer">
<p>&copy; 2017 PeachRain</p>
<p><a href="https://github.com/taosiyu"><span class="glyphicon glyphicon-cloud" aria-hidden="true"></span> GitHub</a></p>
<p>网站版权归属:PeachRain</p>
</footer>
    
    
    </body>
</html>
